<!DOCTYPE html>

<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <meta http-equiv="MSThemeCompatible" content="Yes" />
    <meta charset="utf-8" />

    <script src='js/jquery.js'></script>

    <script type="text/javascript" src="js/jquery-ui.min.js"></script>

    <script src='js/skalp.js'></script>
    <link href="css/skalp_dialog.css" rel="stylesheet" />

    <link href="css/jquery-ui-1.10.4.custom.min.css" rel="stylesheet" />
    <link href="css/skalp_styles.css" rel="stylesheet" />

    <style>
        #sections_dialog {
            margin: 0;
            padding: 0;
            border: 0;
        }

        #menu_title {
            margin: 0;
            padding: 2px;
            left: 12px;
            font-size: 11px;
            font-weight: bold;
        }

        .on_top_menu {
            font-size: 12px;
            font-family: "Arial", sans-serif;

            z-index: 155;
            position: absolute;
            top: -100px;
            left: 40px;
            width: 170px;
            height: 75px;
            background-color: #f9f9f9;
            padding: 0 5px 0 5px;
            box-shadow: 0 4px 10px 6px rgba(0, 0, 0, 0.3);

        }

        .menu_checkbox {
            position: absolute;
        }

        .menu_label {
            position: absolute;
            left: 20px;
        }

        .row0 {
            padding-top: 2px;
            position: relative;
        }

        .row1 {
            position: relative;
            padding-top: 9px;
        }

        .row2 {

            position: relative;
            padding-top: 9px;
        }

        .button_update {
            font-size: 12px;
        }

        #rearview_checkbox {
            position: absolute;
            top: 7px;
            right: 20px;
        }

        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 150;
            display: none;
        }
    </style>

    <script>
        $(document).ready(function () {
            $("#sections_update").click(function () {
                var src = $(this).attr('src');

                if (src != 'icons/update_icon_inactive.png') {
                    $("#overlay").css("display", "block");
                    $(".on_top_menu").animate({ top: 0 }, 300);
                }
            });

            $("#not_uptodate").click(function () {
                update_scene()
            });

            $("#not_uptodate").mousedown(function () {
                $(this).attr("src", 'icons/update_scene_icon_12x12_pushed.png');
            });

            $("#not_uptodate").mouseup(function () {
                $(this).attr("src", 'icons/update_scene_icon_12x12.png');
            });

            $("#align_view").mousedown(function () {
                $(this).attr("src", 'icons/align_view_pushed.png');
            });

            $("#align_view").mouseup(function () {
                $(this).attr("src", 'icons/align_view.png');
            });

            $("#align_view").click(function () {
                var src = $(this).attr('src');

                if (src != 'icons/align_view_inactive.png') {
                    window.location = 'skp:align_view@';
                }
            });

            $("#overlay").click(function () {
                $(".on_top_menu").css('top', -100);
                $("#overlay").css("display", "none");
            });

            $("#menu_update_active").click(function () {
                $(".on_top_menu").css('top', -100);
                $("#overlay").css("display", "none");

                var rearview = $("#rearview_checkbox").prop('checked');
                window.location = 'skp:sections_update@' + rearview.toString();
            });

            $("#style_rearview_switch_label").click(function () {
                if ($("#style_rearview_switch_label").css('color') != $("#drawing_scale_label").css('color')) {
                    window.location = 'skp:sections_update@' + 'true';
                }
            });

            $("#menu_update_all").click(function () {
                $(".on_top_menu").css('top', -100);
                $("#overlay").css("display", "none");

                var rearview = $("#rearview_checkbox").prop('checked');

                window.location = 'skp:sections_update_all@' + rearview.toString();
            });

            $("#onoff_rearview").click(function () {
                var src = $(this).attr('src');
                var newsrc = (src == 'icons/onoff_green_small.png' ? 'icons/onoff_grey_small.png' : 'icons/onoff_green_small.png');
                $(this).attr('src', newsrc);

                var onoff = (newsrc == 'icons/onoff_green_small.png' ? true : false);
                window.location = 'skp:set_rearview_switch@' + onoff.toString();
            });

            $("#onoff_lineweights").click(function () {
                var src = $(this).attr('src');
                var newsrc = (src == 'icons/onoff_green_small.png' ? 'icons/onoff_grey_small.png' : 'icons/onoff_green_small.png');
                $(this).attr('src', newsrc);

                var onoff = (newsrc == 'icons/onoff_green_small.png' ? true : false);
                window.location = 'skp:set_lineweights_switch@' + onoff.toString();
            });

            $("#onoff_fog").click(function () {
                var src = $(this).attr('src');
                var newsrc = (src == 'icons/onoff_green_small.png' ? 'icons/onoff_grey_small.png' : 'icons/onoff_green_small.png');
                $(this).attr('src', newsrc);
                var onoff = (newsrc == 'icons/onoff_green_small.png' ? true : false);

                if (onoff) {
                    $("#fog_distance_input").prop('disabled', false);
                } else {
                    $("#fog_distance_input").prop('disabled', true);
                }

                window.location = 'skp:set_fog_switch@' + onoff.toString();
            });

            $("#render_mode").click(function () {
                var src = $(this).attr('src');
                var newsrc = (src == 'icons/render_hiddenline_active.png' ? 'icons/render_hiddenline.png' : 'icons/render_hiddenline_active.png');
                $(this).attr('src', newsrc);
                var status = (newsrc == 'icons/render_hiddenline.png' ? 'inactive' : 'active');
                window.location = 'skp:switch_rendermode@' + status;
            });

            $("#reverse_sectionplane").click(function () {
                window.location = 'skp:reverse_sectionplane@';
            });

            //            $("#render_mode").mousedown(function(){
            //                $(this).attr("src", 'icons/render_hiddenline_pushed.png');
            //            });

        });
    </script>

</head>

<body onload="ready()" onresize="dialog_resize()" onblur="onblur()" onfocus="onfocus()" onmouseover="document.focus();"
    scroll="no" style="OVERFLOW: hidden">

    <div id="sections_dialog">

        <div id="overlay"></div>
        <div class="on_top_menu">
            <div class="row0">
                <p id="menu_title">Section Update Options:</p>
            </div>

            <div class="row1">
                <!--<img class="image_button" src='icons/onoff_green.png' width="25" height="14"-->
                <!--title='Display rearview lines' id='display_rearview'-->
                <!--onmousedown=''>-->
                <label class="menu_label">Rear View Projection</label> <input class="menu_checkbox"
                    id="rearview_checkbox" type="checkbox" name="rearview" checked><br>
            </div>

            <!--<button class="row3" id="menu_cancel" type="button">Cancel</button>-->
            <div class="row2">
                <button class="button_update" id="menu_update_active" type="button">Active View</button>
                <button class="button_update" id="menu_update_all" type="button">All Scenes</button>
            </div>

        </div>

        <!-- SECTIONS -->

        <img src='icons/update_icon_black.png' title='Manual updating' class='image_button' id='sections_update'>
        <img src='icons/onoff_grey_small.png' title='Activate Sectionplane Toggle' class='image_button'
            id='sections_switch' onmousedown='active_sectionplane_toggle()'>

        <img src='icons/update_scene_icon_12x12.png' title='Update Skalp Scene' class='image_button' id='not_uptodate'>

        <img src='icons/render_hiddenline.png' title='Skalp Hidden Line' class='image_button' id='render_mode'>

        <img src='icons/align_view.png' title='Align View with Section' class='image_button' id='align_view'>

        <img src='icons/add.png' title='Place new Section Plane' class='image_button' id='sections_add'
            onmousedown='sections_add()' onmouseup='sections_add_up()'>

        <img src='icons/delete.png' title='Delete active Section Plane' class='image_button' id='sections_delete'
            onmousedown='sections_delete()' onmouseup='sections_delete_up()'>

        <img src='icons/reverse_icon.png' title='Reverse active Section Plane' class='image_button'
            id='reverse_sectionplane' onmousedown='reverse_sectionplane()'>

        <img src='icons/show_more.png' title='Show more' class='image_button' id='sections_show_more'
            onclick='sections_show_more()' onmousedown='sections_show_more_down()'>

        <img src='icons/menu.png' title='Menu' class='image_button' id='sections_menu' onmousedown='sections_menu()'
            onmouseup="section_menu_up()">

        <select title='Menu' class='image_button' id='sections_menu_list' onclick="menu(this.selectedIndex)"
            onfocus="this.selectedIndex = -1;">
            <optgroup label="Preferences" id="label_preferences">
                <option id="live_updating" value="Live updating">Turn OFF Skalp Section Fill</option>
                <option id="offset_distance" value="Offset Distance">Set Section Offset Distance</option>
                <option id="render brightness" value="render brightness">Set Render Brightness</option>
                <option id="dashedlines" value="linestyle system">Set linestyle system</option>
            </optgroup>
            <optgroup label="Export" id="label_export">
                <option id="export_to_LayOut" value='Export all scenes to LayOut'>Export all scenes to LayOut</option>
                <option id="export_to_dxf" value='Export to DXF'>Export to DWG/DXF</option>
                <option id="export_to_images" value='Export to JPG'>Export to Images</option>
                <option id="export_patterns_to_LayOut" value='Export Patterns to LayOut'>Export Patterns to LayOut
                </option>
            </optgroup>
            <optgroup label="Skalp Resources" id="styles">
                <option id="save_active_style_to_library" value="Save Style Rules to library">Save Style Rules</option>
                <option id="load_style_from_library" value="Load Style Rules form library">Load Style Rules</option>
                <option id="export_materials" value="Export Skalp Materials">Export Skalp Materials</option>
                <option id="import_materials" value="Import Skalp Materials">Import Skalp Materials</option>
                <option id="export_layer_mapping" value="Export Skalp Layer Mapping">Export Skalp Layer Mapping</option>
                <option id="import_layer_mapping" value="Import Skalp Layer Mapping">Import Skalp Layer Mapping</option>
            </optgroup>
        </select>

        <select class='listbox' id='sections_list' onchange='change_active_sectionplane(this.value)'> </select>

        <input type='text' title='Rename Section Plane' class='textbox' id='sections_rename' value=''>

        <svg height="10" width="7" id='sections_arrow_svg'>
            <polygon points="0,4 7,4 3.5,0" />
            <polygon points="0,6 7,6 3.5,10" />
        </svg>

        <!-- SECTIONS MORE -->
    </div>

    <div id="material_dialog">

        <img src="icons/tag_icon_12x12.png" title="Select material" class="image_button" id="tag_icon" height=18
            width=18>
        <input type="text" id="tag" value="" class="textbox">

        <img src="icons/hatch_icon_12x12.png" title="Edit Material with the Pattern Designer" class="image_button"
            id="hatch_icon" onclick="edit_hatchmaterial()" onmousedown='hatch_down()' onmouseup='hatch_up()'>
        <input type="text" id="material_list" onclick="materialSelector(this.id)" class="textbox" readonly="readonly">
        </input>
        <button type="button" id="deselect" onclick="deselect()">deselect</button>

    </div>
    <!-- SHOW MORE -->

    <img src="icons/resize.png" title="resize" id="resize">

    <div id="dialog_styles" class="text">

        <div id="save_style" class="text">
            save style to scene <input type="checkbox" name="save" id="save_check" onchange="save_style()">
            <!-- Is added again with the translation in Skalp.section_dialog.rb !!!!!!!!! -->
        </div>

        <div id="drawing_scale_div">
            <div id="drawing_scale_label">Drawing Scale:</div>
            <div id="drawing_scale_1">1 / </div>
            <div id="drawing_scale_input_div">
                <input type='text' title='Drawing scale' id="drawing_scale_input" value='50'>
            </div>
        </div>

        <div id="rear_lines">
            <label id="style_rearview_switch_label">Rear View Projection</label>
            <img src='icons/onoff_grey_small.png' title='Turn Rear View lines on' id='onoff_rearview'>

            <div id="linestyles_div">
                <select class='linestyles_listbox' id='linestyles' onclick="set_linestyle(this.value)">
                    <option value="Solid Basic">–––––––––––––––––</option>
                    <option value="Short dash">– – – – – – – – – – –</option>
                    <option value="Dash">–– –– –– –– –– –– ––</option>
                    <option value="Dot">· · · · · · · · · · · · · · ·</option>
                    <option value="Dash dot">— · — · — · — · —</option>
                    <option value="Dash double-dot">— · · — · · — · · —</option>
                    <option value="Dash triple-dot">— · · · — · · · — · · ·</option>
                    <option value="Double-dash dot">— — · — — · — —</option>
                    <option value="Double-dash double-dot">— — · · — — · · —</option>
                    <option value="Double-dash triple-dot">— — · · · — — · · ·</option>
                    <option value="Long-dash dash">–– – –– – –– – –– – </option>
                    <option value="Long-dash double-dash">–– – – –– – – –– – – </option>
                </select>
            </div>

        </div>

        <div id="lineweights">
            <label id="style_lineweight_switch_label">Section Cut Widths</label>
            <img src='icons/onoff_grey_small.png' title='Turn lineweights on' id='onoff_lineweights'>
        </div>

        <div id='fog'>
            <div id="fog_label">Depth Clipping at:</div>
            <img src='icons/onoff_grey_small.png' title='Turn Rear View lines on' id='onoff_fog'>
            <div id="fog_distance_div">
                <input type='text' title='Define Depth Clipping Distance' id="fog_distance_input" value='0'>
            </div>
        </div>

        <div id="style_line"></div>

        <div id="style_title">Pattern Fill Rules:</div>

        <!--    <img src='icons/reset_icon.png' title='Reset rules to default' class='image_button' id="reset_style">-->
        <img src='icons/add_style.png' title='Add new rule line' class='image_button' id="add_item">
        <img src='icons/edit.png' title='Edit Skalp Style' class='image_button' id='edit_style'
            onmousedown='rules_menu()' onmouseup="rules_menu_up()">


        <select title='Rules' class='image_button' id='rules_menu_list' onclick="style_edit_menu(this.selectedIndex)"
            onfocus="this.selectedIndex = -1;">
            <option id="menu_edit" value="Edit Rules">Edit Rules</option>
            <option id="menu_reset" value="Reset Rules">Reset Rules to default</option>
        </select>

        <div id="skalp_styles">
            <table id="sortable_header">
                <tbody onchange="save_style()">
                    <tr class="ui-state-default model head_top">
                        <td class="column_drag"></td>
                        <td class="column_selector_type">
                            <div class="div_selector_type">
                                <img src="icons/model_icon_12x12.png" alt="" height=18 width=18>
                            </div>
                        </td>
                        <td class="column_selector_name">
                            <div class="div_selector_name">
                                <input type="text" class="style_textbox all_objects" readonly="readonly"
                                    value="All Objects">
                            </div>
                        </td>
                        <td class="column_arrow" style="font-size: 10px">=></td>
                        <td class="column_convert_to_type">
                            <div class="div_convert_to_selector">
                                <img src="icons/hatch_icon_12x12.png" alt="" height=18 width=18>
                            </div>
                        </td>
                        <td class="column_convert_to">
                            <div class="div_convert_to">
                                <input type="text" id="model_material" readonly="readonly"
                                    class="style_textbox convert_to_value hover">
                            </div>
                        </td>
                        <td class="column_delete"></td>
                    </tr>
                </tbody>
            </table>
            <table id="sortable_table">
                <tbody id="sortable" onchange="save_style()"></tbody>
            </table>
        </div>

    </div>

    <div id="display_settings_blured" class="text">
    </div>

    <script>
        $(function () {

            $('select').change(function () {
                $(this).blur();
            })

            $(".convert_to_value").off("click");
            $(".convert_to_value").on("click", function (event) {
                materialSelector(this.id);
            })

            $(".convert_to_value.hover").hover(function () {
                $(this).css("font-weight", "bold")
            }, function () {
                $(this).css("font-weight", "normal")
            });

            $(function () {
                $("#dialog-message").dialog({
                    modal: true,
                    buttons: {
                        Ok: function () {
                            $(this).dialog("close");
                        }
                    }
                });
            });

        })
    </script>

    <!-- RUBY BRIDGE -->
    <input id="RUBY_BRIDGE" type="hidden">
    <input id="UNDO_FLAG" type="hidden" onchange="reset_undo_flag()">

    <input id="patterns" type="hidden">
    <input id="layers" type="hidden">
    <input id="layers2" type="hidden">
    <input id="scenes" type="hidden">

    <input id="max_height" type="hidden" value=2000>
    <input id="min_height" type="hidden" value=83>
    <input id="min_width" type="hidden" value=255>

</body>

</html>